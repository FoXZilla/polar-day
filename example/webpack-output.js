!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PolarDay=e():t.PolarDay=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=40)}([function(t,e,n){"use strict";var r,o;Object.defineProperty(e,"__esModule",{value:!0});var i,a=n(16);try{e.DEBUG=!1}catch(t){e.DEBUG=!1}!function(t){t.Timeline="timeline",t.Axis="axis",t.AxisBody="axis_body",t.AxisScale="axis_scale",t.AxisMilestone="axis_milestone",t.Event="event",t.EventBody="event_body",t.EventMark="event_mark",t.EventAxis="event_axis"}(i=e.SN||(e.SN={})),e.DATE_COUNT_EXTRA=((r={}).day=432e5,r.week=3024e5,r.month=1296e6,r.quarter=3888e6,r.year=15552e6,r),e.WALK_ON=((o={})[i.EventAxis]={offsetOneStep:15},o),e.SN_VERSION=a.version},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var u=n(0);function c(t){return"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}function l(t){return[{startX:t.x,startY:t.y,endX:t.x+t.width,endY:t.y},{startX:t.x+t.width,startY:t.y,endX:t.x+t.width,endY:t.y+t.height},{startX:t.x+t.width,startY:t.y+t.height,endX:t.x,endY:t.y+t.height},{startX:t.x,startY:t.y+t.height,endX:t.x,endY:t.y}]}function f(t,e){var n,r=t.startX,o=t.startY,i=t.endX,s=t.endY,u=e.startX,c=e.startY,l=e.endX,f=e.endY;if([r,i,u,l,o,s,c,f].some(isNaN))throw TypeError("Unexpected NaN");n=a([r,i,u,l,o,s,c,f].map(Math.round),8),r=n[0],i=n[1],u=n[2],l=n[3],o=n[4],s=n[5],c=n[6],f=n[7];var h=a([Math.abs(r-i)/Math.abs(o-s),Math.abs(u-l)/Math.abs(c-f)],2),d=h[0],p=h[1];if(d===p){var y=a([r,i].sort(function(t,e){return e-t}),2),w=y[0],v=y[1],b=a([o,s].sort(function(t,e){return e-t}),2),x=b[0],m=b[1];return 0===d?(c<=x&&c>=m||f<=x&&f>=m)&&r===u:d===1/0?(u<=w&&u>=v||l<=w&&l>=v)&&o===c:u<=w&&u>=v&&c<=x&&c>=m||l<=w&&l>=v||f<=x&&f>=m}d===1/0&&(o+=1e-4),p===1/0&&(c+=1e-4),0===d&&(r+=1e-4),0===p&&(u+=1e-4);var g=((r*s-o*i)*(u-l)-(r-i)*(u*f-c*l))/((r-i)*(c-f)-(o-s)*(u-l)),_=((r*s-o*i)*(c-f)-(o-s)*(u*f-c*l))/((r-i)*(c-f)-(o-s)*(u-l));if(isNaN(g)||isNaN(_))return!1;if(r>=i){if(!(i<=g&&g<=r))return!1}else if(!(r<=g&&g<=i))return!1;if(o>=s){if(!(s<=_&&_<=o))return!1}else if(!(o<=_&&_<=s))return!1;if(u>=l){if(!(l<=g&&g<=u))return!1}else if(!(u<=g&&g<=l))return!1;if(c>=f){if(!(f<=_&&_<=c))return!1}else if(!(c<=_&&_<=f))return!1;return!0}e.isBox=c,e.box2Lines=l,e.parseBox=function(t){var e=getComputedStyle(t);return{x:parseFloat(e.left),y:parseFloat(e.top),width:parseFloat(e.width),height:parseFloat(e.height)}},e.mergeBox=function(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o={x:1/0,y:1/0},a={x:-1/0,y:-1/0};try{for(var s=i(n),u=s.next();!u.done;u=s.next()){var c=u.value;c.x<o.x&&(o.x=c.x),c.y<o.y&&(o.y=c.y),c.x+c.width>a.x&&(a.x=c.x+c.width),c.y+c.height>a.y&&(a.y=c.y+c.height)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return{x:o.x,y:o.y,width:a.x-o.x,height:a.y-o.y}},e.shrinkBox=function(t,e){return void 0===e&&(e=1),{x:t.x+e,y:t.y+e,width:t.width-2*e,height:t.height-2*e}},e.isIntersecting=f,e.isOverlap=function(t,e){var n=c(t)?l(t):[t],r=c(e)?l(e):[e];return n.some(function(t){return r.some(function(e){return f(t,e)})})},e.walkLoop=function(t,e){return void 0===e&&(e=10),r(this,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:n=!1,r=0,o.label=1;case 1:return r<e?[4,t()]:[3,4];case 2:if((i=o.sent()).includes("alleviated"))return n=!0,[3,3];if(i.every(function(t){return"no-conflict"===t}))return[2,"no-conflict"];if(i.includes("failed"))return[2,n?"alleviated":"failed"];o.label=3;case 3:return r++,[3,1];case 4:throw new Error("too many loop")}})})},e.createLogFunction=function(t){return function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(u.DEBUG){for(var o=[e[0]],i=0;i<n.length;i++)o.push(n[i],e[i+1]);console.log.apply(console,s([t+" #"],o))}}},e.deepFreeze=function t(e){var n,r,o=JSON.parse(JSON.stringify(e)),a=Object.getOwnPropertyNames(o);try{for(var s=i(a),u=s.next();!u.done;u=s.next()){var c=u.value;"object"==typeof o[c]&&null!==o[c]&&(o[c]=t(o[c]))}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return Object.freeze(o)}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i,a=n(0),s=n(1);!function(t){t[t.SUPER_APPLY=0]="SUPER_APPLY",t[t.SUPER_DRAW=1]="SUPER_DRAW",t[t.SUPER_DESTROY=2]="SUPER_DESTROY",t[t.SUPER_CREATE_ELEMENT=3]="SUPER_CREATE_ELEMENT",t[t.SUPER_HIDE=4]="SUPER_HIDE"}(i||(i={}));var u=function(){function t(t){var e=t.ext,n=t.canvas,r=t.container;this.extraData={},this.ratio=window.devicePixelRatio||1,this.destroyed=!1,this.ext=e,this.canvas=n,this.container=r}return t.prototype.setupRadio=function(){var t=this.canvas.getContext("2d");this.canvas.style.width=this.canvas.width+"px",this.canvas.width*=this.ratio,this.canvas.height*=this.ratio,t.setTransform(1,0,0,1,0,0),t.scale(this.ratio,this.ratio)},t.prototype.createElement=function(){return this.element&&this.container.removeChild(this.element),this.element=document.createElement("div"),this.element.classList.add("short-night",this.theme,this.name),this.container.appendChild(this.element),i.SUPER_CREATE_ELEMENT},t.prototype.destroy=function(){return this.checkDestroy(),this.destroyed=!0,this.element&&(this.container.removeChild(this.element),delete this.element),this.ext.onDestroy(this),i.SUPER_DESTROY},t.prototype.apply=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return this.checkDestroy(),[4,this.ext.onApply(this)];case 1:return t.sent(),[2,i.SUPER_APPLY]}})})},t.prototype.draw=function(){return this.checkDestroy(),this.ext.onDraw(this),i.SUPER_DRAW},t.prototype.hide=function(){return this.checkDestroy(),this.element&&(this.element.style.visibility="hidden"),this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.ext.onHide(this),i.SUPER_HIDE},t.prototype.importDrawInfo=function(t){return this.drawInfo=t,this},Object.defineProperty(t.prototype,"l",{get:function(){return s.createLogFunction(this.theme+"/"+this.name)},enumerable:!0,configurable:!0}),t.prototype.checkDestroy=function(){if(this.destroyed){var t=this.theme+"/"+this.name+" has bean destroyed,however, you still called it's method.";if(a.DEBUG)throw new Error(t);console.warn(t)}},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(0).DEBUG&&console.log("The night is short, walk on girl.");var r=n(5);e.Timeline=r.default;var o=n(6);e.Axis=o.default;var i=n(9);e.AxisScale=i.default;var a=n(10);e.AxisMilestone=a.default;var s=n(8);e.AxisBody=s.default;var u=n(11);e.Event=u.default;var c=n(13);e.EventMark=c.default;var l=n(14);e.EventAxis=l.default;var f=n(12);e.EventBody=f.default;var h=n(2);e.Component=h.default;var d=n(7);e.ExtensionManager=d.ExtensionManager,e.BoxElementGenerator=d.BoxElementGenerator,e.IdGenerator=d.IdGenerator,e.PositionCounter=d.PositionCounter,e.BreakpointAnimation=d.BreakpointAnimation,e.ConflictFixer=d.ConflictFixer},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i,a=n(0),s=n(17),u=n(6),c=n(8),l=n(5);!function(t){t.PushScalesAndMilestones="PushScalesAndMilestones",t.FixEventBody2AxisMilestone="FixEventBody2AxisMilestone",t.FixEventAxis2EventAxis="FixEventAxis2EventAxis",t.FixEventBody2EventBodyMover="FixEventBody2EventBodyMover",t.FixEventBody2EventBodyFloater="FixEventBody2EventBodyFloater",t.DrawFrom="DrawFrom",t.Debug="Debug"}(i=e.Breakpoint||(e.Breakpoint={}));var f=function(){function t(e,n){var r=this,o=void 0===n?{}:n,s=o.breakpoints,u=void 0===s?[]:s,c=o.playAnimation,l=void 0!==c&&c,f=o.autoScroll,h=void 0!==f&&f,d=o.timeoutCounter,p=void 0===d?function(t,e){return t===i.DrawFrom?100:e.forward?200:300}:d,y=o.scrollDuration,w=void 0===y?50:y,v=o.scrollContainer,b=void 0===v?window:v;this.ext=e,this.breakpoints=u,this.playAnimation=l,this.autoScroll=h,this.timeoutCounter=p,this.scrollDuration=w,this.scrollContainer=b,this.playAnimation&&0===this.breakpoints.length&&(this.breakpoints=t.defaultAnimationBreakpoints),a.DEBUG&&(this.breakpoints.push(i.Debug),window.next=this.next.bind(this),window.abort=function(){delete r.stepIn})}return t.prototype.onDraw=function(t){l.default.is(t)&&this.playAnimation&&this.moveTo.move(this.ext.components[a.SN.Timeline][0].canvas)},t.prototype.block=function(t,e){return void 0===e&&(e={}),r(this,void 0,void 0,function(){var n,i,a,s,u,c,l=this;return o(this,function(f){return n=e.onBlock,i=e.onNext,a=e.components,s=void 0===a?[]:a,this.breakpoints.includes(t)?(console.log("Blocking at "+t+"."),this.playAnimation&&(this.autoScroll&&(u=this.countScrollTarget(e))&&(c=u-document.documentElement.scrollTop,Math.abs(c)>10&&this.moveTo.move(u-document.documentElement.scrollTop)),setTimeout(function(){return l.next()},this.timeoutCounter(t,e))),[2,r(l,void 0,void 0,function(){var t=this;return o(this,function(e){switch(e.label){case 0:return n?[4,n()]:[3,2];case 1:e.sent(),e.label=2;case 2:return s.forEach(function(t){return t.draw()}),[4,new Promise(function(e){t.stepIn=function(){return r(t,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return i?[4,i()]:[3,2];case 1:t.sent(),t.label=2;case 2:return s.forEach(function(t){return t.hide()}),e(),[2]}})})}})];case 3:return e.sent(),[2]}})})]):[2]})})},t.prototype.next=function(){if(!this.stepIn)throw new Error("Call next when not blocking.");this.stepIn(),delete this.stepIn},Object.defineProperty(t.prototype,"moveTo",{get:function(){return new s({duration:this.scrollDuration,container:this.scrollContainer})},enumerable:!0,configurable:!0}),t.prototype.countScrollTarget=function(t){var e,n=t.components,r=t.protagonist;if(r)return r.drawInfo.box.y-100;if(n&&n.length){var o=n.filter(function(t){return!u.default.is(t)&&!c.default.is(t)});return(e=o,e.find(function(t){return e.every(function(e){return t.drawInfo.box.y>=e.drawInfo.box.y})})).drawInfo.box.x-100}return null},t.defaultAnimationBreakpoints=[i.FixEventBody2AxisMilestone,i.FixEventAxis2EventAxis,i.FixEventBody2EventBodyMover,i.FixEventBody2EventBodyFloater,i.DrawFrom],t}();e.default=f},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),f=n(0),h=n(4),d=n(18),p=n(7),y=n(1),w=function(t){function e(n){var r=t.call(this,{ext:n.ext||new p.ExtensionManager,canvas:n.canvas,container:n.container})||this;return r.name=f.SN.Timeline,r.runtime={},r.drawInfo={box:{x:0,y:0,width:0,height:0},events:[]},r.events=[],r.axis=null,r.grid=n.grid||e.defaultGrid,r.ext.onConstruct(r),r}return o(e,t),e.prototype.createBox=function(){this.drawInfo.box=y.mergeBox.apply(void 0,u([this.axis.drawInfo.box],this.events.map(function(t){return t.drawInfo.box})))},e.prototype.apply=function(e){return i(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:if(!this.drawInfo.events.length)throw new Error("No event passed the timeline!");return this.initRuntime(e),this.stretchCanvas(),[4,this.initAxis()];case 1:return n.sent(),[4,this.axis.apply()];case 2:return n.sent(),this.events.forEach(function(t){return t.destroy()}),this.events.length=0,this.initEvents(),[4,Promise.all(this.events.map(function(t){return t.apply()}))];case 3:return n.sent(),this.createBox(),[2,t.prototype.apply.call(this)]}})})},e.prototype.draw=function(){return this.stretchCanvas(),this.setupRadio(),this.axis.draw(),this.events.forEach(function(t){return t.draw()}),t.prototype.draw.call(this)},e.prototype.hide=function(){return this.events.forEach(function(t){return t.hide()}),this.axis.hide(),t.prototype.hide.call(this)},e.prototype.drawFrom=function(t){return i(this,void 0,void 0,function(){var e,n,r,o,i,s,l,f,d,p,y,w,v,b,x,m,g,_,I,k,E,D,S,O=this;return a(this,function(a){switch(a.label){case 0:i="string"==typeof t?JSON.parse(t).data:t.data,s=new this.axisConstructor(this),l=new this.eventConstructor(this),this.canvas.width=i.width,this.canvas.height=i.height,i.axis.milestonesDrawInfo.forEach(function(t){"date"in t.content&&(t.content.date=new Date(t.content.date))}),f=[],d=i.axis,g=d.bodyDrawInfo,p=d.scalesDrawInfo,y=d.milestonesDrawInfo,f.push(new s.bodyConstructor(this).importDrawInfo(g)),w=[],p.forEach(function(t){w.push(new s.scaleConstructor(O).importDrawInfo(t))}),y.forEach(function(t){w.push(new s.milestoneConstructor(O).importDrawInfo(t))}),w.sort(function(t,e){return t.drawInfo.alignY-e.drawInfo.alignY}),f.push.apply(f,u(w)),v=Array.from(i.events).sort(function(t,e){return t.drawInfo.target.y-e.drawInfo.target.y});try{for(b=c(v),x=b.next();!x.done;x=b.next())m=x.value,g=m.bodyDrawInfo,_=m.markDrawInfo,I=m.axisDrawInfo,f.push(new l.markConstructor(this).importDrawInfo(_)),f.push(new l.bodyConstructor(this).importDrawInfo(g)),null!==I&&f.push(new l.axisConstructor(this).importDrawInfo(I))}catch(t){e={error:t}}finally{try{x&&!x.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}a.label=1;case 1:a.trys.push([1,6,7,8]),k=c(f),E=k.next(),a.label=2;case 2:return E.done?[3,5]:(D=E.value,[4,this.ext.breakpoint.block(h.Breakpoint.DrawFrom,{protagonist:D})]);case 3:a.sent(),D.draw(),a.label=4;case 4:return E=k.next(),[3,2];case 5:return[3,8];case 6:return S=a.sent(),r={error:S},[3,8];case 7:try{E&&!E.done&&(o=k.return)&&o.call(k)}finally{if(r)throw r.error}return[7];case 8:return[2]}})})},e.prototype.export=function(){var t=this.ext.components[f.SN.Timeline][0];return JSON.parse(JSON.stringify({theme:t.theme,version:f.SN_VERSION,data:{width:t.canvas.width,height:t.canvas.height,timeline:t.drawInfo,runtime:t.runtime,events:t.events.map(function(t){return{drawInfo:t.drawInfo,bodyDrawInfo:t.body.drawInfo,markDrawInfo:t.mark.drawInfo,axisDrawInfo:t.axis?t.axis.drawInfo:null}}),axis:{drawInfo:t.axis.drawInfo,bodyDrawInfo:t.axis.body.drawInfo,scalesDrawInfo:t.axis.scales.map(function(t){return t.drawInfo}),milestonesDrawInfo:t.axis.milestones.map(function(t){return t.drawInfo})}}}))},e.prototype.stretchCanvas=function(){var t,e;this.canvas.width=this.grid.canvasWidth,this.canvas.height=this.runtime.axisLength+2*this.grid.axisStart.y;var n=this.ext.components;for(var r in n)try{for(var o=c(n[r]),i=o.next();!i.done;i=o.next()){var a=i.value.drawInfo.box;this.canvas.height=Math.max(this.canvas.height,a.y+a.height+this.grid.axisStart.y),this.canvas.width=Math.max(this.canvas.width,a.x+a.width)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.initRuntime=function(t){this.runtime=Object.create(t||Object.prototype),this.runtime.startDate="startDate"in this.runtime?new Date(this.runtime.startDate):this.countStartData(),this.runtime.endDate="endDate"in this.runtime?new Date(this.runtime.endDate):this.countEndData(),this.runtime.milestoneBy="milestoneBy"in this.runtime?this.runtime.milestoneBy:this.countMilestoneBy(),this.runtime.scaleBy="scaleBy"in this.runtime?this.runtime.scaleBy:this.countScaleBy(),this.runtime.axisLength="axisLength"in this.runtime?this.runtime.axisLength:this.countAxisLength(),this.runtime.startDate=new Date(new Date(this.runtime.startDate).getTime()-f.DATE_COUNT_EXTRA[this.runtime.scaleBy||"day"]),this.runtime.endDate=new Date(new Date(this.runtime.endDate).getTime()+f.DATE_COUNT_EXTRA[this.runtime.scaleBy||"day"])},e.prototype.countStartData=function(){var t=Array.from(this.drawInfo.events).sort(function(t,e){return Number(new Date(t.date))-Number(new Date(e.date))});return new Date(t[0].date)},e.prototype.countEndData=function(){var t=this.drawInfo.events,e=Math.max.apply(Math,u(t.map(function(t){return Number(new Date(t.date))}))),n=Math.max.apply(Math,u(t.filter(function(t){return"endDate"in t}).map(function(t){return Number(new Date(t.endDate))})))||-1;return new Date(Math.max(e,n))},e.prototype.countMilestoneBy=function(){var t=new Date(this.runtime.endDate).getTime()-new Date(this.runtime.startDate).getTime();switch(!0){case t>62208e6:return"year";case t>15552e6:return"quarter";case t>5184e6:return"month";case t>12096e5:return"week"}return null},e.prototype.countScaleBy=function(){switch(this.runtime.milestoneBy){case"year":return"quarter";case"quarter":return"month";case"month":return"week";case"week":return"day"}return null},e.prototype.countAxisLength=function(){return 500+100*this.drawInfo.events.length},e.prototype.initAxis=function(){var t=this;this.axis||(this.axis=new this.axisConstructor(this));var e=this.runtime.startDate.getTime(),n=this.runtime.endDate.getTime(),r=new d.default(e,n),o=n-e;this.axis.drawInfo.length=this.runtime.axisLength,null!==this.runtime.milestoneBy&&(this.axis.drawInfo.milestones=r.split(this.runtime.milestoneBy).map(function(e){return{position:(n-e.getTime())/o,content:{date:e.toISOString(),by:t.runtime.milestoneBy}}})),null!==this.runtime.scaleBy&&(this.axis.drawInfo.scales=r.split(this.runtime.scaleBy).map(function(e){return(new Date(t.runtime.endDate).getTime()-e.getTime())/o}))},e.prototype.initEvents=function(){var t,e,n=Array.from(this.drawInfo.events).sort(function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()}),r=new Date(this.runtime.endDate).getTime()-new Date(this.runtime.startDate).getTime();try{for(var o=c(n),i=o.next();!i.done;i=o.next()){var a=i.value,s=new this.eventConstructor(this);if(s.drawInfo.axisBodyDrawInfo=y.deepFreeze(this.axis.body.drawInfo),s.drawInfo.target={x:this.axis.body.drawInfo.box.x+this.axis.body.drawInfo.box.width/2,y:(new Date(this.runtime.endDate).getTime()-new Date(a.date).getTime())/r*this.axis.drawInfo.length},s.drawInfo.date=a.date,s.drawInfo.title=a.title,s.drawInfo.description=a.description,s.drawInfo.folded=Boolean(a.folded),s.drawInfo.foldPlaceholder=a.foldPlaceholder,s.drawInfo.endText=a.endText,a.endDate){var u=new Date("now"===a.endDate?this.runtime.endDate:a.endDate);s.drawInfo.endDate=u.toISOString(),s.drawInfo.axisLength=(u.getTime()-new Date(a.date).getTime())/r*this.axis.drawInfo.length}this.events.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.is=function(t){return t.name===f.SN.Timeline},e.mount=function(t,e){var n="string"==typeof t?document.querySelector(t):t;n.innerHTML="",n.classList.add("short-night",e,"container");var r=document.createElement("canvas");return r.height=6e3,r.width=600,r.classList.add("short-night",e,"canvas"),n.appendChild(r),{container:n,canvas:r}},e.defaultGrid={eventOffset:{x:20,y:0},minEventAxisOffset:25,markWidth:15,scaleHeight:5,axisWidth:12,axisStart:{x:450,y:10},eventWidth:300,canvasWidth:700},e}(l.default);e.default=w},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),f=n(0),h=n(1),d=function(t){function e(e){var n=t.call(this,e)||this;return n.name=f.SN.Axis,n.drawInfo={scales:[],milestones:[],length:0,box:{x:0,y:0,width:0,height:0}},n.milestones=[],n.scales=[],n.body=null,n.grid=e.grid,n.ext.onConstruct(n),n}return o(e,t),e.prototype.createBox=function(){this.drawInfo.box=h.mergeBox.apply(void 0,u([this.body.drawInfo.box],this.milestones.map(function(t){return t.drawInfo.box}),this.scales.map(function(t){return t.drawInfo.box})))},e.prototype.apply=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.initBody(),[4,this.body.apply()];case 1:return e.sent(),this.initScales(),this.initMilestones(),[4,Promise.all(u(this.scales.map(function(t){return t.apply()}),this.milestones.map(function(t){return t.apply()})))];case 2:return e.sent(),this.createBox(),[2,t.prototype.apply.call(this)]}})})},e.prototype.draw=function(){return this.body.draw(),this.scales.forEach(function(t){return t.draw()}),this.milestones.forEach(function(t){return t.draw()}),t.prototype.draw.call(this)},e.prototype.destroy=function(){return this.body.destroy(),this.scales.forEach(function(t){return t.destroy()}),this.milestones.forEach(function(t){return t.destroy()}),t.prototype.destroy.call(this)},e.prototype.hide=function(){return this.body.hide(),this.scales.forEach(function(t){return t.hide()}),this.milestones.forEach(function(t){return t.hide()}),t.prototype.hide.call(this)},e.prototype.initBody=function(){this.body&&this.body.destroy(),this.body=new this.bodyConstructor(this),this.body.drawInfo.length=this.drawInfo.length,this.body.drawInfo.width=this.grid.axisWidth,this.body.drawInfo.start=this.grid.axisStart},e.prototype.initScales=function(){var t,e;this.scales.forEach(function(t){return t.destroy()}),this.scales.length=0;var n=function(t){if(r.drawInfo.milestones.some(function(e){return e.position===t}))return"continue";var e=new r.scaleConstructor(r);e.drawInfo.bodyDrawInfo=h.deepFreeze(r.body.drawInfo),e.drawInfo.alignY=t*r.body.drawInfo.length,e.drawInfo.height=r.grid.scaleHeight,r.scales.push(e)},r=this;try{for(var o=c(this.drawInfo.scales),i=o.next();!i.done;i=o.next()){n(i.value)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.initMilestones=function(){var t,e;this.milestones.forEach(function(t){return t.destroy()}),this.milestones.length=0;try{for(var n=c(this.drawInfo.milestones),r=n.next();!r.done;r=n.next()){var o=r.value,i=o.position,a=o.content,s=new this.milestoneConstructor(this);s.drawInfo.bodyDrawInfo=h.deepFreeze(this.body.drawInfo),s.drawInfo.alignY=i*this.body.drawInfo.length,s.drawInfo.content=a,this.milestones.push(s)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.is=function(t){return t.name===f.SN.Axis},e}(l.default);e.default=d},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(6),u=n(8),c=n(9),l=n(10),f=n(11),h=n(12),d=n(13),p=n(14),y=n(4);e.BreakpointAnimation=y.default;var w=n(19);e.BoxElementGenerator=w.default;var v=n(20);e.IdGenerator=v.default;var b=n(21);e.PositionCounter=b.default;var x,m=n(22);e.ConflictFixer=m.default,function(t){t.Debug="debug",t.DebugOnly="debug-only"}(x=e.ExtensionType||(e.ExtensionType={}));var g=function(){function t(t){this.ext=t}return t.prototype.onConstruct=function(t){this.ext.components[t.name].push(t)},t.prototype.onDestroy=function(t){this.ext.components[t.name].splice(this.ext.components[t.name].indexOf(t),1)},t}();e.Base=g;var _=function(){function t(t){var e,n=void 0===t?{}:t,r=n.breakpointAnimation,o=n.disableAll,i=void 0!==o&&o,s=n.disableAllButDebug,u=void 0!==s&&s;this.extraData={},this.components=((e={})[a.SN.Timeline]=[],e[a.SN.Axis]=[],e[a.SN.AxisBody]=[],e[a.SN.AxisScale]=[],e[a.SN.AxisMilestone]=[],e[a.SN.Event]=[],e[a.SN.EventBody]=[],e[a.SN.EventMark]=[],e[a.SN.EventAxis]=[],e),this.onConstruct=I("onConstruct",this),this.onApply=I("onApply",this),this.onHide=I("onHide",this),this.onDraw=I("onDraw",this),this.onDestroy=I("onDestroy",this),this.disableAll=i,this.disableAllButDebug=u,this.breakpoint=new y.default(this,r),this.extensions=[new g(this),new v.default(this),new w.default(this),new b.default(this),new m.default(this),this.breakpoint]}return t.prototype.getParent=function(t){if(s.default.is(t))return this.components[a.SN.Timeline][0];if(f.default.is(t))return this.components[a.SN.Timeline][0];if(u.default.is(t))return this.components[a.SN.Axis][0];if(l.default.is(t))return this.components[a.SN.Axis][0];if(c.default.is(t))return this.components[a.SN.Axis][0];if(h.default.is(t))return this.components[a.SN.Event].find(function(e){return e.body===t});if(p.default.is(t))return this.components[a.SN.Event].find(function(e){return e.axis===t});if(d.default.is(t))return this.components[a.SN.Event].find(function(e){return e.mark===t});throw new TypeError("Cannot find parent of "+t.constructor.name)},t}();function I(t,e){return function(n){return r(this,void 0,void 0,function(){var r,s,u,c,l,f;return o(this,function(o){switch(o.label){case 0:if(e.disableAll)return[2];o.label=1;case 1:o.trys.push([1,7,8,9]),u=i(e.extensions),c=u.next(),o.label=2;case 2:if(c.done)return[3,6];if((l=c.value).type===x.DebugOnly&&!a.DEBUG)return[3,5];if(e.disableAllButDebug){if(!a.DEBUG)return[3,5];if(!l.type)return[3,5];if(![x.DebugOnly,x.Debug].includes(l.type))return[3,5]}return t in l?"onApply"!==t?[3,4]:[4,l[t](n)]:[3,5];case 3:return o.sent(),[3,5];case 4:l[t](n),o.label=5;case 5:return c=u.next(),[3,2];case 6:return[3,9];case 7:return f=o.sent(),r={error:f},[3,9];case 8:try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}return[7];case 9:return[2]}})})}}e.ExtensionManager=_},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),u=n(0),c=function(t){function e(e){var n=t.call(this,e)||this;return n.name=u.SN.AxisBody,n.drawInfo={box:{x:0,y:0,width:0,height:0},length:0,width:0,start:{x:0,y:0}},n.ext.onConstruct(n),n}return o(e,t),e.prototype.createBox=function(){this.drawInfo.box={x:this.drawInfo.start.x-this.drawInfo.width/2,y:this.drawInfo.start.y,width:this.drawInfo.width,height:this.drawInfo.length}},e.prototype.apply=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.createBox(),[2,t.prototype.apply.call(this)]})})},e.is=function(t){return t.name===u.SN.AxisBody},e}(s.default);e.default=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),u=n(0),c=function(t){function e(e){var n=t.call(this,e)||this;return n.name=u.SN.AxisScale,n.drawInfo={bodyDrawInfo:{},alignY:0,height:0,box:{x:0,y:0,width:0,height:0}},n.ext.onConstruct(n),n}return o(e,t),e.prototype.createBox=function(){this.drawInfo.box={x:this.drawInfo.bodyDrawInfo.box.x,y:this.drawInfo.alignY-this.drawInfo.height/2,height:this.drawInfo.height,width:this.drawInfo.bodyDrawInfo.box.width}},e.prototype.apply=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.createBox(),[2,t.prototype.apply.call(this)]})})},e.is=function(t){return t.name===u.SN.AxisScale},e}(s.default);e.default=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=n(2),c=n(0),l=function(t){function e(e){var n=t.call(this,e)||this;return n.name=c.SN.AxisMilestone,n.drawInfo={bodyDrawInfo:{},alignY:0,content:"0_o",box:{x:0,y:0,width:0,height:0}},n.ext.onConstruct(n),n}return o(e,t),e.prototype.formatDate=function(t,e){var n=t.toDateString().split(" ")[1];switch(e){case"year":return""+t.getFullYear();case"quarter":return n+". "+t.getFullYear();case"month":return n+".";case"week":case"day":return t.getMonth()+1+"."+t.getDate();default:return t.toLocaleString()}},e.prototype.createElement=function(){var e=t.prototype.createElement.call(this);this.element.innerHTML="string"==typeof this.drawInfo.content?this.drawInfo.content:this.formatDate(new Date(this.drawInfo.content.date),this.drawInfo.content.by);var n=s.parseBox(this.element),r=n.width,o=n.height,i=this.drawInfo.bodyDrawInfo.box.x+this.drawInfo.bodyDrawInfo.box.width/2-r/2,a=this.drawInfo.alignY-o/2;return this.element.style.left=i+"px",this.element.style.top=a+"px",e},e.prototype.createBox=function(){this.drawInfo.box=s.parseBox(this.element)},e.prototype.apply=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.createElement(),this.element.style.visibility="hidden",this.createBox(),[2,t.prototype.apply.call(this)]})})},e.prototype.draw=function(){return this.createElement(),t.prototype.draw.call(this)},e.is=function(t){return t.name===c.SN.AxisMilestone},e}(u.default);e.default=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),u=n(1),c=n(0),l=function(t){function e(e){var n=t.call(this,e)||this;return n.name=c.SN.Event,n.mark=null,n.body=null,n.axis=null,n.grid=e.grid,n.drawInfo={target:{x:30,y:50},offset:n.grid.eventOffset,date:null,title:null,folded:!1,box:{x:0,y:0,width:500,height:500},axisBodyDrawInfo:{}},n.ext.onConstruct(n),n}return o(e,t),e.prototype.createBox=function(){this.drawInfo.box=u.mergeBox(this.body.drawInfo.box,this.mark.drawInfo.box),this.axis&&(this.drawInfo.box=u.mergeBox(this.drawInfo.box,this.axis.drawInfo.box))},e.prototype.apply=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.initMark(),[4,this.mark.apply()];case 1:return e.sent(),this.initBody(),[4,this.body.apply()];case 2:return e.sent(),this.initAxis(),this.axis?[4,this.axis.apply()]:[3,4];case 3:e.sent(),e.label=4;case 4:return this.createBox(),[2,t.prototype.apply.call(this)]}})})},e.prototype.draw=function(){return this.body.draw(),this.axis&&this.axis.draw(),this.mark.draw(),t.prototype.draw.call(this)},e.prototype.hide=function(){return this.mark.hide(),this.body.hide(),this.axis&&this.axis.hide(),t.prototype.hide.call(this)},e.prototype.destroy=function(){return this.mark.destroy(),this.body.destroy(),this.axis&&this.axis.destroy(),t.prototype.destroy.call(this)},e.prototype.initMark=function(){this.mark&&this.mark.destroy(),this.mark=new this.markConstructor(this),this.mark.drawInfo.target=this.drawInfo.target,this.mark.drawInfo.width=this.grid.markWidth,this.mark.drawInfo.height=this.grid.markHeight},e.prototype.initBody=function(){this.body&&this.body.destroy(),this.body=new this.bodyConstructor(this),this.body.drawInfo.markDrawInfo=u.deepFreeze(this.mark.drawInfo),this.body.drawInfo.maxWidth=this.grid.eventWidth,this.body.drawInfo.date=this.drawInfo.date,this.body.drawInfo.title=this.drawInfo.title,this.body.drawInfo.description=this.drawInfo.description,this.body.drawInfo.folded=this.drawInfo.folded,this.body.drawInfo.foldPlaceholder=this.drawInfo.foldPlaceholder,this.body.drawInfo.offset=Object.assign({},this.drawInfo.offset),this.body.drawInfo.endText=this.drawInfo.endText,this.body.drawInfo.endDate=this.drawInfo.endDate},e.prototype.initAxis=function(){if(this.axis&&(this.axis.destroy(),this.axis=null),this.drawInfo.axisLength){var t=this.axis||new this.axisConstructor(this);t.drawInfo.axisBodyDrawInfo=this.drawInfo.axisBodyDrawInfo,t.drawInfo.markDrawInfo=u.deepFreeze(this.mark.drawInfo),t.drawInfo.offsetX=this.grid.minEventAxisOffset,t.drawInfo.length=this.drawInfo.axisLength,t.drawInfo.text=this.drawInfo.endText,this.axis=t}},e.is=function(t){return t.name===c.SN.Event},e}(s.default);e.default=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),c=n(2),l=n(0),f=function(t){function e(e){var n=t.call(this,e)||this;return n.name=l.SN.EventBody,n.element=null,n.drawInfo={markDrawInfo:null,offset:{x:0,y:0},maxWidth:300,date:null,title:"untitled",floated:!1,folded:!1,box:{x:0,y:0,width:0,height:0}},n.ext.onConstruct(n),n}return o(e,t),e.prototype.createElement=function(){var e=t.prototype.createElement.call(this);return this.drawInfo.floated&&this.element.classList.add("floated"),this.drawInfo.folded&&this.element.classList.add("folded"),this.element.innerHTML='\n            <div class="foldPlaceholder" title="'+this.drawInfo.title+'">\n                '+(this.drawInfo.foldPlaceholder||this.drawInfo.title)+'\n            </div>\n            <div class="title">'+this.drawInfo.title+'</div>\n            <div class="date">'+new Date(this.drawInfo.date).toLocaleDateString()+'</div>\n            <div class="description">'+this.drawInfo.description+"</div>\n        ",this.drawInfo.description||this.element.removeChild(this.element.querySelector(".description")),this.drawInfo.floated?this.element.style.maxWidth=this.drawInfo.maxWidth+"px":this.element.style.maxWidth=this.drawInfo.maxWidth-this.drawInfo.offset.x+"px",e},e.prototype.createBox=function(){var t=u.parseBox(this.element),e=i({width:t.width,height:t.height},this.drawInfo.markDrawInfo.target);e.x-=e.width,e.y-=e.height/2,e.x-=this.drawInfo.offset.x,e.y+=this.drawInfo.offset.y,this.drawInfo.box=e},e.prototype.apply=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return this.createElement(),this.createBox(),this.applyBoxToElement(),this.element.style.visibility="hidden",[2,t.prototype.apply.call(this)]})})},e.prototype.draw=function(){return this.createElement(),this.applyBoxToElement(),t.prototype.draw.call(this)},e.prototype.applyBoxToElement=function(){this.element.style.left=this.drawInfo.box.x+"px",this.element.style.top=this.drawInfo.box.y+"px"},e.is=function(t){return t.name===l.SN.EventBody},e}(c.default);e.default=f},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),u=n(0),c=function(t){function e(e){var n=t.call(this,e)||this;return n.name=u.SN.EventMark,n.drawInfo={axisBodyDrawInfo:{},box:{x:0,y:0,width:0,height:0},target:{x:0,y:0},width:0},n.ext.onConstruct(n),n}return o(e,t),e.prototype.createBox=function(){var t=this.drawInfo.width,e=this.drawInfo.height||t;this.drawInfo.box={width:t,height:e,x:this.drawInfo.target.x-t/2,y:this.drawInfo.target.y-e/2}},e.prototype.apply=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.createBox(),[2,t.prototype.apply.call(this)]})})},e.is=function(t){return t.name===u.SN.EventMark},e}(s.default);e.default=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=n(2),c=n(0),l=function(t){function e(e){var n=t.call(this,e)||this;return n.name=c.SN.EventAxis,n.drawInfo={axisBodyDrawInfo:{},markDrawInfo:{},length:0,offsetX:0,box:{x:0,y:0,width:0,height:0}},n.ext.onConstruct(n),n}return o(e,t),e.prototype.createElement=function(){var e=t.prototype.createElement.call(this),n=this.drawInfo.markDrawInfo.target;this.element.classList.add("endText"),this.element.innerHTML=this.drawInfo.text;var r=s.parseBox(this.element);return this.element.style.left=n.x+this.drawInfo.offsetX+"px",this.element.style.top=n.y-this.drawInfo.length-r.height/2+"px",e},e.prototype.createBox=function(){var t=this.drawInfo.markDrawInfo.target;this.drawInfo.box={x:t.x,y:t.y-this.drawInfo.length,width:this.drawInfo.offsetX,height:this.drawInfo.length}},e.prototype.apply=function(){return i(this,void 0,void 0,function(){return a(this,function(e){return this.drawInfo.text?(this.createElement(),this.element.style.visibility="hidden"):this.element&&(this.element.parentNode.removeChild(this.element),delete this.element),this.createBox(),[2,t.prototype.apply.call(this)]})})},e.prototype.draw=function(){return this.drawInfo.text&&this.createElement(),t.prototype.draw.call(this)},e.is=function(t){return t.name===c.SN.EventAxis},e}(u.default);e.default=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),a=n(27),s=n(31),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="colors",e.axisConstructor=a.default,e.eventConstructor=s.default,e}return o(e,t),e}(i.Timeline);e.default=u},function(t){t.exports={_from:"short-night@0.0.23",_id:"short-night@0.0.23",_inBundle:!1,_integrity:"sha512-NPpz4LV9KBJI3/hytG8g0sybyazpbdJZ+6JyHimeIEfBhs6Ci/AH8On2oWkOLU0zAE8bfAglR93H7c3/Ehds7g==",_location:"/short-night",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"short-night@0.0.23",name:"short-night",escapedName:"short-night",rawSpec:"0.0.23",saveSpec:null,fetchSpec:"0.0.23"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/short-night/-/short-night-0.0.23.tgz",_shasum:"24610ad9c3a714c3213ca1af5f914d2724e137c1",_spec:"short-night@0.0.23",_where:"E:\\_pea3nut\\projects\\polar-day",author:{name:"FoXZilla, pea3nut"},bugs:{url:"https://github.com/FoXZilla/short-night/issues"},bundleDependencies:!1,dependencies:{"@types/moveto":"^1.8.0",moveto:"^1.8.0"},deprecated:!1,description:"An engine for drawing timeline graph.",devDependencies:{"node-sass":"^4.11.0",touch:"^3.1.0",tslint:"^5.11.0","tslint-config-airbnb":"^5.11.1",typedoc:"^0.14.2",typescript:"^3.0.0"},files:["Event/*","Axis/*","common/*","extensions/*","styles.css","styles.scss","types.d.ts","Timeline.js","Timeline.ts","index.ts","index.js"],homepage:"https://github.com/pea3nut/short-night#readme",keywords:["shortnight","short-night","engine","timeline"],license:"MIT",main:"index.js",name:"short-night",repository:{type:"git",url:"git+https://github.com/FoXZilla/short-night.git"},scripts:{build:"node-sass ./styles.scss -o ./ && tsc","build-doc":'typedoc ./ --exclude **/node_modules/** --out docs/ --readme ./index.docs.md --tsconfig ./tsconfig.json --mode modules --name "Short Night TypeScript Modules" && nodetouch docs/.nojekyll',"fix-lint":"tslint --project tsconfig.json --fix",lint:"tslint --project tsconfig.json",pub:"npm run build && npm publish",test:"npm run lint && npm run build"},types:"index.ts",version:"0.0.23"}},function(t,e,n){"use strict";
/*!
 * MoveTo - A lightweight scroll animation javascript library without any dependency.
 * Version 1.8.2 (28-06-2019 14:30)
 * Licensed under MIT
 * Copyright 2019 Hasan Aydodu <hsnaydd@gmail.com>
 */var r=function(){var t={tolerance:0,duration:800,easing:"easeOutQuart",container:window,callback:function(){}};function e(t,e,n,r){return t/=r,-n*(--t*t*t*t-1)+e}function n(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function r(t){return t instanceof HTMLElement?t.scrollTop:t.pageYOffset}function o(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=n(t,r),this.easeFunctions=n({easeOutQuart:e},o)}return o.prototype.registerTrigger=function(t,e){var r=this;if(t){var o=t.getAttribute("href")||t.getAttribute("data-target"),i=o&&"#"!==o?document.getElementById(o.substring(1)):document.body,a=n(this.options,function(t,e){var n={};return Object.keys(e).forEach(function(e){var r=t.getAttribute("data-mt-".concat(e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})));r&&(n[e]=isNaN(r)?r:parseInt(r,10))}),n}(t,this.options));"function"==typeof e&&(a.callback=e);var s=function(t){t.preventDefault(),r.move(i,a)};return t.addEventListener("click",s,!1),function(){return t.removeEventListener("click",s,!1)}}},o.prototype.move=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===t||t){o=n(this.options,o);var i,a="number"==typeof t?t:t.getBoundingClientRect().top,s=r(o.container),u=null;a-=o.tolerance;window.requestAnimationFrame(function n(c){var l=r(e.options.container);u||(u=c-1);var f=c-u;if(i&&(a>0&&i>l||a<0&&i<l))return o.callback(t);i=l;var h=e.easeFunctions[o.easing](f,s,a,o.duration);o.container.scroll(0,h),f<o.duration?window.requestAnimationFrame(n):(o.container.scroll(0,a+s),o.callback(t))})}},o.prototype.addEaseFunction=function(t,e){this.easeFunctions[t]=e},o}();t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.bigger=+new Date(t)>+new Date(e)?new Date(t):new Date(e),this.smaller=+new Date(t)<=+new Date(e)?new Date(t):new Date(e)}return t.prototype.split=function(e,n){for(var r=[],o=new Date(this.smaller);+t.increment[e](o,n)<+this.bigger;)r.push(new Date(o));return r},t.increment={year:function(t,e){return void 0===e&&(e=1),t.setMonth(0,1),t.setHours(0,0,0,1),t.setFullYear(t.getFullYear()+e),t},quarter:function(t){return t.setMonth(3*~~(t.getMonth()/3),1),t.setHours(0,0,0,1),t.getMonth()+3>=12?(t.setFullYear(t.getFullYear()+1),t.setMonth(0,1)):t.setMonth(t.getMonth()+3,1),t},month:function(t){return t.setDate(1),t.setHours(0,0,0,1),11===t.getMonth()?(t.setFullYear(t.getFullYear()+1),t.setMonth(0,1)):t.setMonth(t.getMonth()+1,1),t},week:function(t){t.setHours(0,0,0,1);do{t.setTime(t.getTime()+864e5)}while(1!==t.getDay());return t},day:function(t){return t.setHours(0,0,0,1),t.setTime(t.getTime()+864e5),t}},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var s=n(7),u=n(0),c=function(){function t(t){var e=this;this.ext=t,this.type=s.ExtensionType.DebugOnly,u.DEBUG&&(window.clearBox=function(){var t,n,r=e.ext.components;for(var o in r)try{for(var a=i(r[o]),s=a.next();!s.done;s=a.next()){var u=s.value.extraData.boxElement;u&&u.parentElement&&u.parentElement.removeChild(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}})}return t.prototype.onApply=function(t){return r(this,void 0,void 0,function(){var e,n,r,s,u,c,l,f;return o(this,function(o){t.extraData.boxElement&&t.extraData.boxElement.parentElement&&t.extraData.boxElement.parentElement.removeChild(t.extraData.boxElement),(r=document.createElement(t.name)).id=t.extraData.id;try{for(s=i(Object.entries(t.drawInfo)),u=s.next();!u.done;u=s.next())c=a(u.value,2),l=c[0],void 0!==(f=c[1])&&r.setAttribute(l,JSON.stringify(f))}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return Object.assign(r.style,{position:"absolute",left:t.drawInfo.box.x+"px",top:t.drawInfo.box.y+"px",width:t.drawInfo.box.width+"px",height:t.drawInfo.box.height+"px",zIndex:2147483647-~~(t.drawInfo.box.width*t.drawInfo.box.height)}),t.container.appendChild(r),t.extraData.boxElement=r,[2]})})},t.prototype.onDestroy=function(t){var e=t.extraData.boxElement;e&&e.parentElement&&e.parentElement.removeChild(e)},t}();e.default=c},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),a=n(0),s=function(){function t(t){this.ext=t,this.type=i.ExtensionType.Debug}return t.prototype.onConstruct=function(t){var e=Number(Math.random().toString().split(".")[1]).toString(36).slice(0,5);Object.defineProperty(t.extraData,"id",{get:function(){return t.name+"_"+e}})},t.prototype.onApply=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){return a.DEBUG&&(window[t.extraData.id]=t),[2]})})},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(6),c=n(1),l=n(4),f=n(0),h=n(5),d=function(){function t(t){this.ext=t,this.pushConfigs=[]}return t.prototype.onApply=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return u.default.is(t)?[4,this.adjustAxis(t)]:[3,2];case 1:return[2,e.sent()];case 2:return h.default.is(t)?[4,this.adjustEvent(t)]:[3,4];case 3:return[2,e.sent()];case 4:return[2]}})})},t.prototype.onDestroy=function(t){for(;;){var e=this.pushConfigs.findIndex(function(e){return e.component===t});if(-1===e)break;this.pushConfigs.splice(e,1)}},t.prototype.adjustAxis=function(t){return r(this,void 0,void 0,function(){var e,n,r,i,u,h,d,p,y,w,v,b,x,m,g,_,I=this;return o(this,function(o){switch(o.label){case 0:return u=a([t.body],t.scales,t.milestones),t.extraData.realLength=t.drawInfo.length-t.milestones.reduce(function(t,e){return t+e.drawInfo.box.height},0),h=t.extraData.realLength/t.drawInfo.length,t.milestones.forEach(function(t){return t.drawInfo.alignY*=h}),t.scales.forEach(function(t){return t.drawInfo.alignY*=h}),[4,Promise.all(a(t.milestones,t.scales).map(function(t){return t.apply()}))];case 1:return o.sent(),[4,this.ext.breakpoint.block(l.Breakpoint.PushScalesAndMilestones,{components:u})];case 2:o.sent(),t.milestones.forEach(function(t){return I.addPushConfig({critical:t.drawInfo.alignY,additional:t.drawInfo.box.height,component:t})}),o.label=3;case 3:o.trys.push([3,8,9,10]),d=s(t.milestones),p=d.next(),o.label=4;case 4:return p.done?[3,7]:((y=p.value).drawInfo.alignY+=y.drawInfo.box.height/2,[4,y.apply()]);case 5:o.sent(),o.label=6;case 6:return p=d.next(),[3,4];case 7:return[3,10];case 8:return w=o.sent(),e={error:w},[3,10];case 9:try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}return[7];case 10:return[4,this.ext.breakpoint.block(l.Breakpoint.PushScalesAndMilestones,{components:u})];case 11:o.sent(),v=a(t.milestones,t.scales).sort(function(t,e){return t.drawInfo.alignY-e.drawInfo.alignY}),o.label=12;case 12:o.trys.push([12,19,20,21]),b=s(v),x=b.next(),o.label=13;case 13:return x.done?[3,18]:(m=x.value,g=this.countCritical(m.drawInfo.alignY,m)+t.body.drawInfo.box.y,m.name!==f.SN.AxisMilestone?[3,16]:[4,Promise.all(v.map(function(t){return t.apply()}))]);case 14:return o.sent(),[4,this.ext.breakpoint.block(l.Breakpoint.PushScalesAndMilestones,{components:u})];case 15:o.sent(),o.label=16;case 16:m.drawInfo.alignY+=g,o.label=17;case 17:return x=b.next(),[3,13];case 18:return[3,21];case 19:return _=o.sent(),r={error:_},[3,21];case 20:try{x&&!x.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}return[7];case 21:return[4,Promise.all(v.map(function(t){return t.apply()}))];case 22:return o.sent(),[4,this.ext.breakpoint.block(l.Breakpoint.PushScalesAndMilestones,{components:u})];case 23:return o.sent(),[4,Promise.all(u.map(function(t){return t.apply()}))];case 24:return o.sent(),t.drawInfo.box=c.mergeBox.apply(void 0,a(u.map(function(t){return t.drawInfo.box}))),[2]}})})},t.prototype.adjustEvent=function(t){return r(this,void 0,void 0,function(){var e,n,r,i,a,u,c,l;return o(this,function(o){switch(o.label){case 0:r=t.events,i=this.ext.components[f.SN.Axis][0],a=i.extraData.realLength/i.drawInfo.length;try{for(u=s(r),c=u.next();!c.done;c=u.next())(l=c.value).drawInfo.target.y*=a,l.drawInfo.target.y+=this.countCritical(l.drawInfo.target.y),l.drawInfo.axisLength&&(l.drawInfo.axisLength*=a,l.drawInfo.axisLength+=this.countCritical(l.drawInfo.target.y)-this.countCritical(l.drawInfo.target.y-l.drawInfo.axisLength)),l.drawInfo.target.y+=i.body.drawInfo.box.y}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return[4,Promise.all(r.map(function(t){return t.apply()}))];case 1:return o.sent(),[2]}})})},t.prototype.addPushConfig=function(t){this.pushConfigs.push(t)},t.prototype.countCritical=function(t,e){return 0===this.pushConfigs.length?t:this.pushConfigs.reduce(function(n,r){return e&&e===r.component?n:t>r.critical?n+r.additional:n},0)},t}();e.default=d},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(5),u=n(1),c=n(23),l=n(24),f=n(25),h=n(26),d=function(){function t(t){this.ext=t,this.fixers=[new c.default(this.ext),new l.default(this.ext),new f.default(this.ext),new h.default(this.ext)],this.counter=0}return t.prototype.onApply=function(t){return r(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return s.default.is(t)?[4,this.fixAll()]:[2];case 1:if("no-conflict"===n.sent())return this.counter=0,[2];if(this.counter++,this.counter>10){if(e="Too many times("+this.counter+") of try fix conflict.",a.DEBUG)throw new Error(e);console.warn(e)}return[4,Promise.resolve().then(function(){return t.apply({axisLength:1.1*t.runtime.axisLength})})];case 2:return n.sent(),[2]}})})},t.prototype.fixAll=function(){return r(this,void 0,void 0,function(){var t=this;return o(this,function(e){switch(e.label){case 0:return[4,u.walkLoop(function(){return r(t,void 0,void 0,function(){var t,e,n,r,a,s,u,c,l;return o(this,function(o){switch(o.label){case 0:n=[],o.label=1;case 1:o.trys.push([1,6,7,8]),r=i(this.fixers),a=r.next(),o.label=2;case 2:return a.done?[3,5]:(s=a.value,c=(u=n).push,[4,s.fix()]);case 3:c.apply(u,[o.sent()]),o.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return l=o.sent(),t={error:l},[3,8];case 7:try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}return[7];case 8:return[2,n]}})})})];case 1:return[2,e.sent()]}})})},t}();e.default=d},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),l=n(1),f=n(4),h=function(){function t(t){this.ext=t}return t.prototype.fix=function(){return o(this,void 0,void 0,function(){var t,e,n,o,s,h,d,p,y,w,v,b,x,m,g;return i(this,function(i){switch(i.label){case 0:s=this.ext.components[c.SN.EventBody],h=this.ext.components[c.SN.AxisMilestone],i.label=1;case 1:i.trys.push([1,14,15,16]),d=a(s),p=d.next(),i.label=2;case 2:if(p.done)return[3,13];y=p.value,i.label=3;case 3:i.trys.push([3,10,11,12]),w=a(h),v=w.next(),i.label=4;case 4:return v.done?[3,9]:(b=v.value,l.isOverlap(y.drawInfo.box,b.drawInfo.box)?(x={protagonist:b,components:u(this.ext.components[c.SN.AxisBody],[b,y])},[4,this.ext.breakpoint.block(f.Breakpoint.FixEventBody2AxisMilestone,x)]):[3,8]);case 5:return i.sent(),y.drawInfo.offset.x=b.drawInfo.box.width/2+1,[4,y.apply()];case 6:return i.sent(),[4,this.ext.breakpoint.block(f.Breakpoint.FixEventBody2AxisMilestone,r({},x,{forward:!0}))];case 7:i.sent(),i.label=8;case 8:return v=w.next(),[3,4];case 9:return[3,12];case 10:return m=i.sent(),n={error:m},[3,12];case 11:try{v&&!v.done&&(o=w.return)&&o.call(w)}finally{if(n)throw n.error}return[7];case 12:return p=d.next(),[3,2];case 13:return[3,16];case 14:return g=i.sent(),t={error:g},[3,16];case 15:try{p&&!p.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}return[7];case 16:return[2,"no-conflict"]}})})},t}();e.default=h},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),l=n(1),f=n(4),h=function(){function t(t){this.ext=t}return t.prototype.fix=function(){return o(this,void 0,void 0,function(){var e,n,o,a,l,h,d,p,y,w=this;return i(this,function(v){switch(v.label){case 0:o=Array.from(this.ext.components[c.SN.EventAxis]).sort(function(t,e){return e.drawInfo.length-t.drawInfo.length}),v.label=1;case 1:if(!o.some(function(e){return o.some(function(n){return t.isConflict(e,n)})}))return[3,10];a=function(e){var n,a;return i(this,function(i){switch(i.label){case 0:return(n=o.filter(function(n){return t.isConflict(e,n)})).length?(a={protagonist:e,components:s(l.ext.components[c.SN.AxisBody],[l.ext.getParent(e)],n.map(function(t){return w.ext.getParent(t)}))},[4,l.ext.breakpoint.block(f.Breakpoint.FixEventAxis2EventAxis,a)]):[3,4];case 1:return i.sent(),e.drawInfo.offsetX+=15,[4,e.apply()];case 2:return i.sent(),[4,l.ext.breakpoint.block(f.Breakpoint.FixEventAxis2EventAxis,r({},a,{forward:!0}))];case 3:return i.sent(),[2,"break"];case 4:return[2]}})},l=this,v.label=2;case 2:v.trys.push([2,7,8,9]),h=u(o),d=h.next(),v.label=3;case 3:return d.done?[3,6]:(p=d.value,[5,a(p)]);case 4:if("break"===v.sent())return[3,6];v.label=5;case 5:return d=h.next(),[3,3];case 6:return[3,9];case 7:return y=v.sent(),e={error:y},[3,9];case 8:try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}return[7];case 9:return[3,1];case 10:return[2,"no-conflict"]}})})},t.isConflict=function(t,e){if(t===e)return!1;var n={startX:t.drawInfo.markDrawInfo.target.x+t.drawInfo.offsetX,startY:t.drawInfo.markDrawInfo.target.y,endX:t.drawInfo.markDrawInfo.target.x+t.drawInfo.offsetX,endY:t.drawInfo.markDrawInfo.target.y-t.drawInfo.length},r={startX:e.drawInfo.markDrawInfo.target.x+e.drawInfo.offsetX,startY:e.drawInfo.markDrawInfo.target.y,endX:e.drawInfo.markDrawInfo.target.x+e.drawInfo.offsetX,endY:e.drawInfo.markDrawInfo.target.y-e.drawInfo.length};return l.isIntersecting(n,r)},t}();e.default=h},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(1),l=n(0),f=n(4),h=function(){function t(t){this.ext=t,this.conflicts=[],this.eventBodyList=[],this.spaceMap=new Map}return t.avoid=function(t){var e=t.mover,n=t.fixed,r=t.direction;return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return r>0?e.drawInfo.offset.y+=n.drawInfo.box.y+n.drawInfo.box.height-e.drawInfo.box.y+1:e.drawInfo.offset.y-=e.drawInfo.box.y+e.drawInfo.box.height-n.drawInfo.box.y+1,[4,e.apply()];case 1:return t.sent(),[2]}})})},t.isConflict=function(t,e){if(t===e)return!1;if(t.drawInfo.floated!==e.drawInfo.floated){var n=t.drawInfo.floated?t:e,r=t===n?e:t;if(n.drawInfo.markDrawInfo.target.y>r.drawInfo.box.y&&n.drawInfo.markDrawInfo.target.y<r.drawInfo.box.y+r.drawInfo.box.height)return!0}return c.isOverlap(t.drawInfo.box,e.drawInfo.box)},t.prototype.fix=function(){return o(this,void 0,void 0,function(){var t=this;return i(this,function(e){switch(e.label){case 0:return this.eventBodyList=Array.from(this.ext.components[l.SN.EventBody]).sort(function(t,e){return t.drawInfo.markDrawInfo.target.y-e.drawInfo.markDrawInfo.target.y}),[4,c.walkLoop(function(){return o(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.tryFixOne()];case 1:return[2,[t.sent()]]}})})})];case 1:return[2,e.sent()]}})})},t.prototype.tryFixOne=function(){return o(this,void 0,void 0,function(){var t,e,n,o=this;return i(this,function(i){switch(i.label){case 0:return[4,this.countConflict()];case 1:return i.sent(),this.countSpace(),0===this.conflicts.length?[2,"no-conflict"]:(this.conflicts=this.conflicts.filter(function(t){return o.isPossible(t)}),0===this.conflicts.length?[2,"failed"]:(t=this.conflicts.find(function(t){return o.conflicts.every(function(e){return o.countCast(t)<=o.countCast(e)})}),e=s([t.self],t.with).sort(function(t,e){return e.drawInfo.markDrawInfo.target.y-t.drawInfo.markDrawInfo.target.y}),n={components:s(this.ext.components[l.SN.AxisBody],e.filter(function(t){return!t.drawInfo.floated}),e.filter(function(t){return t.drawInfo.floated})),protagonist:t.self},[4,this.ext.breakpoint.block(f.Breakpoint.FixEventBody2EventBodyMover,n)]));case 2:return i.sent(),[4,this.fixConflict(t)];case 3:return i.sent(),[4,this.ext.breakpoint.block(f.Breakpoint.FixEventBody2EventBodyMover,r({},n,{forward:!0}))];case 4:return i.sent(),[2,"alleviated"]}})})},t.prototype.isPossible=function(t){if(t.self.drawInfo.floated&&t.with.some(function(t){return!t.drawInfo.floated}))return!1;var e=this.countNeeded(t),n=this.spaceMap.get(t.self);return(0===e.bottom||0===e.top)&&n.bottom>=e.bottom&&n.top>=e.top},t.prototype.fixConflict=function(e){return o(this,void 0,void 0,function(){var n,r,o,a,s,u,c;return i(this,function(i){switch(i.label){case 0:return n=this.countNeeded(e),r=n.top?n.top:-n.bottom,o=r/Math.abs(r),e.self.drawInfo.offset.y+=r,[4,e.self.apply()];case 1:i.sent(),a=this.eventBodyList.filter(function(t){return t.drawInfo.floated===e.self.drawInfo.floated}),s=a.indexOf(e.self)+o,i.label=2;case 2:return s>=0&&s<a.length?(u=a[s-o],c=a[s],t.isConflict(u,c)?[4,t.avoid({direction:o,mover:c,fixed:u})]:[3,4]):[3,6];case 3:return i.sent(),[3,5];case 4:return[3,6];case 5:return s+=o,[3,2];case 6:return[2]}})})},t.prototype.countConflict=function(){return o(this,void 0,void 0,function(){var e,n,r,o,a,s,c;return i(this,function(i){switch(i.label){case 0:return this.conflicts.length=0,[4,Promise.all(this.eventBodyList.map(function(t){return t.apply()}))];case 1:i.sent(),r=function(e){var n={self:e,with:o.eventBodyList.filter(function(n){return t.isConflict(e,n)})};n.with.length&&o.conflicts.push(n)},o=this;try{for(a=u(this.eventBodyList),s=a.next();!s.done;s=a.next())c=s.value,r(c)}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return[2]}})})},t.prototype.countCast=function(t){var e=this.countNeeded(t);return e.bottom+e.top},t.prototype.countNeeded=function(t){var e=t.self,n={top:0,bottom:0},r=t.with.filter(function(t){return t.drawInfo.markDrawInfo.target.y<e.drawInfo.markDrawInfo.target.y}),o=t.with.filter(function(t){return t.drawInfo.markDrawInfo.target.y>e.drawInfo.markDrawInfo.target.y});return r.length&&(n.top=Math.max.apply(Math,s(r.map(function(t){if(t.drawInfo.floated===e.drawInfo.floated)return t.drawInfo.box.y+t.drawInfo.box.height-e.drawInfo.box.y;if(e.drawInfo.floated)return t.drawInfo.box.y+t.drawInfo.box.height-e.drawInfo.markDrawInfo.target.y;if(t.drawInfo.floated)return t.drawInfo.markDrawInfo.target.y-e.drawInfo.box.y;throw SyntaxError("floated is not a boolean")})))),o.length&&(n.bottom=Math.max.apply(Math,s(o.map(function(t){if(t.drawInfo.floated===e.drawInfo.floated)return e.drawInfo.box.y+e.drawInfo.box.height-t.drawInfo.box.y;if(e.drawInfo.floated)return e.drawInfo.markDrawInfo.target.y-t.drawInfo.box.y;if(t.drawInfo.floated)return e.drawInfo.box.y+e.drawInfo.box.height-t.drawInfo.markDrawInfo.target.y;throw SyntaxError("floated is not a boolean")})))),n.top&&n.top++,n.bottom&&n.bottom++,e.extraData.needed=n,n},t.prototype.countSpace=function(){var t=this;this.eventBodyList.forEach(function(e){return t.spaceMap.set(e,{top:e.drawInfo.markDrawInfo.target.y-e.drawInfo.box.y-4,bottom:e.drawInfo.box.y+e.drawInfo.box.height-e.drawInfo.markDrawInfo.target.y-4})});var e=function(e){if(0!==e.length){var n=e[0];t.spaceMap.get(n).bottom=Math.min(t.spaceMap.get(n).bottom,n.drawInfo.box.y);var r=e[e.length-1];t.spaceMap.get(r).top=Math.min(t.spaceMap.get(r).top,r.canvas.height-(r.drawInfo.box.y+r.drawInfo.box.height));for(var o=1;o<e.length;o++){var i=e[o-1],a=e[o],s=t.spaceMap.get(a),u=t.spaceMap.get(i),c=a.drawInfo.box.y-(i.drawInfo.box.y+i.drawInfo.box.height);s.bottom=Math.min(s.bottom,c+u.bottom)}for(o=e.length-2;o>=0;o--){var l=e[o+1],f=(a=e[o],s=t.spaceMap.get(a),t.spaceMap.get(l));c=l.drawInfo.box.y-(a.drawInfo.box.y+a.drawInfo.box.height);s.top=Math.min(s.top,c+f.top)}Array.from(t.spaceMap.values()).forEach(function(t){t.top=Math.max(0,t.top),t.bottom=Math.max(0,t.bottom)})}};e(this.eventBodyList.filter(function(t){return t.drawInfo.floated})),e(this.eventBodyList.filter(function(t){return!t.drawInfo.floated})),this.eventBodyList.forEach(function(e){return e.extraData.space=t.spaceMap.get(e)})},t}();e.default=h},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),l=n(1),f=n(4),h=function(){function t(t){this.ext=t,this.conflicts=[],this.eventBodyList=[]}return t.isConflict=function(t,e){return t!==e&&(!t.drawInfo.floated&&!e.drawInfo.floated&&l.isOverlap(t.drawInfo.box,e.drawInfo.box))},t.prototype.float=function(t){return o(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return e=Math.max.apply(Math,s(t.with.map(function(t){return t.drawInfo.box.width+t.drawInfo.offset.x}))),t.self.drawInfo.offset.x=e+1,t.self.drawInfo.maxWidth=Math.min(this.timeline.grid.eventWidth,this.axisBody.drawInfo.box.x-e),t.self.drawInfo.floated=!0,[4,t.self.apply()];case 1:return n.sent(),[2]}})})},t.prototype.fix=function(){return o(this,void 0,void 0,function(){var t,e,n;return i(this,function(o){switch(o.label){case 0:return this.timeline=this.ext.components[c.SN.Timeline][0],this.axisBody=this.ext.components[c.SN.AxisBody][0],this.eventBodyList=Array.from(this.ext.components[c.SN.EventBody]).sort(function(t,e){return t.drawInfo.markDrawInfo.target.y-e.drawInfo.markDrawInfo.target.y}),this.countConflict(),0===this.conflicts.length?[2,"no-conflict"]:(t=this.pickRingleader(),e=s([t.self],t.with).sort(function(t,e){return e.drawInfo.markDrawInfo.target.y-t.drawInfo.markDrawInfo.target.y}),n={components:s([this.axisBody],e.filter(function(t){return!t.drawInfo.floated}),e.filter(function(t){return t.drawInfo.floated})),protagonist:t.self},[4,this.ext.breakpoint.block(f.Breakpoint.FixEventBody2EventBodyFloater,n)]);case 1:return o.sent(),[4,this.float(t)];case 2:return o.sent(),[4,this.ext.breakpoint.block(f.Breakpoint.FixEventBody2EventBodyFloater,r({},n,{forward:!0}))];case 3:return o.sent(),[2,"alleviated"]}})})},t.prototype.pickRingleader=function(){var t=this;return this.conflicts.find(function(e){return t.conflicts.every(function(t){return e.with.length>=t.with.length})})},t.prototype.countConflict=function(){var e,n;this.conflicts.length=0;var r=function(e){var n={self:e,with:o.ext.components[c.SN.EventBody].filter(function(n){return t.isConflict(e,n)})};n.with.length&&o.conflicts.push(n)},o=this;try{for(var i=u(this.eventBodyList),a=i.next();!a.done;a=i.next()){r(a.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t}();e.default=h},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),a=n(28),s=n(29),u=n(30),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="colors",e.bodyConstructor=a.default,e.milestoneConstructor=s.default,e.scaleConstructor=u.default,e}return o(e,t),e}(i.Axis);e.default=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="polar-day",e}return o(e,t),e.prototype.draw=function(){var e=this.canvas.getContext("2d"),n=this.drawInfo.box;return e.beginPath(),e.fillStyle="#000000",e.fillRect(n.x,n.y,n.width,n.height),t.prototype.draw.call(this)},e}(n(3).AxisBody);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="polar-day",e}return o(e,t),e.prototype.draw=function(){var e=this.canvas.getContext("2d"),n=this.drawInfo.box;return e.beginPath(),e.fillStyle="#aaaaaa",e.fillRect(n.x,n.y,n.width,n.height),t.prototype.draw.call(this)},e}(n(3).AxisMilestone);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="polar-day",e}return o(e,t),e.prototype.draw=function(){var e=this.canvas.getContext("2d"),n=this.drawInfo.box;return e.beginPath(),e.fillStyle="#ff6600",e.fillRect(n.x,n.y,n.width,n.height),t.prototype.draw.call(this)},e}(n(3).AxisScale);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),a=n(32),s=n(33),u=n(34),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="polar-day",e.bodyConstructor=a.default,e.axisConstructor=s.default,e.markConstructor=u.default,e}return o(e,t),e}(i.Event);e.default=c},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="polar-day",e}return o(e,t),e.prototype.draw=function(){var e=this.canvas.getContext("2d"),n=this.drawInfo.box;return e.beginPath(),e.fillStyle="#eeeeee",e.fillRect(n.x,n.y,n.width,n.height),e.moveTo(this.drawInfo.markDrawInfo.target.x,this.drawInfo.markDrawInfo.target.y),e.lineTo(this.drawInfo.markDrawInfo.target.x-this.drawInfo.offset.x,this.drawInfo.markDrawInfo.target.y),e.stroke(),t.prototype.draw.call(this)},e}(n(3).EventBody);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="polar-day",e}return o(e,t),e.prototype.draw=function(){var e=this.canvas.getContext("2d");return e.beginPath(),e.moveTo(this.drawInfo.markDrawInfo.target.x,this.drawInfo.markDrawInfo.target.y),e.lineTo(this.drawInfo.markDrawInfo.target.x+this.drawInfo.offsetX,this.drawInfo.markDrawInfo.target.y),e.lineTo(this.drawInfo.markDrawInfo.target.x+this.drawInfo.offsetX,this.drawInfo.markDrawInfo.target.y-this.drawInfo.length),e.stroke(),t.prototype.draw.call(this)},e}(n(3).EventAxis);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theme="polar-day",e}return o(e,t),e.prototype.draw=function(){var e=this.canvas.getContext("2d");this.drawInfo.box;return e.beginPath(),e.fillStyle="#ff0000",e.arc(this.drawInfo.target.x,this.drawInfo.target.y,this.drawInfo.width/2,0,2*Math.PI),e.fill(),t.prototype.draw.call(this)},e}(n(3).EventMark);e.default=i},function(t,e,n){var r=n(36);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(38)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(37)(!1)).push([t.i,".short-night {\n  position: relative;\n  box-sizing: border-box; }\n  .short-night {\n    margin: 0;\n    padding: 0; }\n  .short-night.axis_milestone {\n    font-family: sans-serif;\n    position: absolute;\n    padding: 5px 10px; }\n  .short-night.event_body {\n    position: absolute;\n    color: #000;\n    padding: 7px 10px 7px 5px; }\n    .short-night.event_body.folded {\n      cursor: pointer; }\n      .short-night.event_body.folded .title, .short-night.event_body.folded .foldPlaceholder {\n        display: none; }\n      .short-night.event_body.folded .foldPlaceholder {\n        display: block; }\n    .short-night.event_body .title, .short-night.event_body .foldPlaceholder {\n      font-size: 1em;\n      text-overflow: ellipsis;\n      text-align: right; }\n    .short-night.event_body .date {\n      font-size: 0.6em;\n      font-weight: normal;\n      font-style: italic;\n      text-align: right; }\n    .short-night.event_body .description {\n      word-break: break-all;\n      font-size: 0.8em; }\n    .short-night.event_body .foldPlaceholder {\n      display: none; }\n  .short-night.event_axis.endText {\n    position: absolute;\n    padding: 0 0 2px 5px;\n    font-size: 0.8em; }\n",""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),u=null,c=0,l=[],f=n(39);function h(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(b(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function p(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertAt.before,n);n.insertBefore(e,o)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function w(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function b(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var a=c++;n=u||(u=w(e)),r=g.bind(null,n,a,!1),o=g.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=f(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=w(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return h(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}t&&h(d(t,e),e);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete i[s.id]}}}};var x,m=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join("\n")});function g(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(15);n(35);var o=new r.default(r.default.mount("#app","polar-day"));o.drawInfo.events=[{date:"2017-5",title:"Axis example 1",endDate:"2017-8",endText:"The axis can avoid for each others"},{date:"2017-6",title:"Axis example 2",endDate:"2017-9-1",endText:"End point is 2017.9"},{date:"2017-9-1",title:"Start of 2017.9"},{date:"2017-1-2",title:"Near the milestone"},{date:"2016-12-15",endDate:"2017-2",title:"Near the milestone",description:"The date of end is 2017.2."},{date:"2018-8-15",title:"Close together 1"},{date:"2018-8-1",title:"Close together 2"},{date:"2018-7-15",title:"Close together 3",description:"The event description."},{date:"2018-7-1",title:"Close together 4",description:"The event description."},{date:"2016-8-1",title:"Close together 5",description:"The event description. The event description. The event description. The event description. The event description."},{date:"2016-8-15",title:"Close together 6",description:"The event description. The event description. The event description. The event description. The event description."},{date:"2018-4-2",title:"A event which title is very very very very very very very very very very long"},{date:"2018-3-9",title:"39s Day two years!"},{date:"2017-3-9",title:"39s Day one years!"},{date:"2016-3-9",title:"39s Day!",description:'In japan and chinese, the pronunciation  of 39 is very like "Thank You". So some people call as Giving Day.'}],o.apply().then(function(){o.draw()})}])});